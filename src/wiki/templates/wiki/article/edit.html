{% extends "worlds/base.html" %}

{% load markdown static %}

{% block scripts %}
<script async type="module" src="{% static 'wiki/wiki.js' %}"></script>
{% endblock %}

{% block content %}
<form {% block form_attrs %}{% endblock %} method="post">
  {% csrf_token %}

  {% block pre_wiki %}{% endblock %}

  <fieldset>
    <legend>Wiki</legend>
    <ul>
      {% for section in object.sections %}
      {# Needs "button" type, otherwise it automatically gets a submit type #}
      <li><button type="button" class="add-section">+</button></li>
      <li>
        <input type="hidden" name="wiki-section-id" value="{{ section.id }}">
        <input type="hidden" name="wiki-section-order" value="{{ section.order }}">
        <textarea name="wiki-section">{{ section.text }}</textarea>
        <button type="button" class="delete-section">üóëÔ∏è</button>
      </li>
      {% endfor %}
      <li><button type="button" class="add-section">+</button></li>
    </ul>
  </fieldset>
  {% block post_wiki %}{% endblock %}
  <input type="submit" value="Submit">
</form>

{% endblock %}
